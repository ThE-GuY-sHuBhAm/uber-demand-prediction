schema: '2.0'
stages:
  data_ingestion:
    cmd: python ./src/data/data_ingestion.py
    deps:
    - path: ./src/data/data_ingestion.py
      hash: md5
      md5: 80dd3ebe9993387b099ed4b6f755cb3a
      size: 3514
    outs:
    - path: ./data/interim/df_without_outliers.csv
      hash: md5
      md5: dfd723e2f538f5475039d72d42c235d2
      size: 1924079864
  extract_features:
    cmd: python ./src/features/extract_features.py
    deps:
    - path: ./data/interim/test_raw.csv
      hash: md5
      md5: 1d116fb6a85378d0a513cb50c35254e4
      size: 680816528
    - path: ./data/interim/train_raw.csv
      hash: md5
      md5: 6d6a7693dd51dd4fe9d88a050ba2f080
      size: 1242224382
    - path: ./src/features/extract_features.py
      hash: md5
      md5: fc3cf7cb7f9b4b0dee5badfc66beb9d2
      size: 2367
    params:
      params.yaml:
        extract_features.ewma.alpha: 0.5
        extract_features.mini_batch_kmeans.n_clusters: 30
        extract_features.mini_batch_kmeans.n_init: 10
        extract_features.mini_batch_kmeans.random_state: 42
    outs:
    - path: ./data/processed/resampled_data.csv
      hash: md5
      md5: 55d09f06db20b41a8a4eccda41e0af5b
      size: 7075161
    - path: ./models/mb_kmeans.joblib
      hash: md5
      md5: c6f0c8a2074cb05fb597a08412e1b344
      size: 280087
    - path: ./models/scaler.joblib
      hash: md5
      md5: 49a480a216110b71000f45e3f61e5ad7
      size: 919
  feature_processing:
    cmd: python ./src/features/feature_processing.py
    deps:
    - path: ./data/processed/resampled_data.csv
      hash: md5
      md5: 55d09f06db20b41a8a4eccda41e0af5b
      size: 7075161
    - path: ./src/features/feature_processing.py
      hash: md5
      md5: 48d2d448d100edb796da0bde746ea7f2
      size: 2225
    outs:
    - path: ./data/processed/test.csv
      hash: md5
      md5: cd1a3eee4a867780ee7db5abf9ca1af4
      size: 5617276
    - path: ./data/processed/train.csv
      hash: md5
      md5: 73197e084c32060fee05904300352077
      size: 10817816
  train:
    cmd: python ./src/models/train.py
    deps:
    - path: ./data/processed/train.csv
      hash: md5
      md5: 2b114780275a962888726814a17e0812
      size: 10469048
    - path: ./src/models/train.py
      hash: md5
      md5: 9034636617e6b5e92ad6ffd6986e6d42
      size: 3099
    outs:
    - path: ./models/encoder.joblib
      hash: md5
      md5: ae1fbab1b72540ebbbad45eadc1c5f7d
      size: 3294
    - path: ./models/model.joblib
      hash: md5
      md5: 7d7ab37e2787fae8497123f4c9619e2f
      size: 308361
  evaluate:
    cmd: python ./src/models/evaluate.py
    deps:
    - path: ./data/processed/test.csv
      hash: md5
      md5: 1d4ac9574d4b1707ce4825946a655082
      size: 5438808
    - path: ./data/processed/train.csv
      hash: md5
      md5: 2b114780275a962888726814a17e0812
      size: 10469048
    - path: ./models/encoder.joblib
      hash: md5
      md5: ae1fbab1b72540ebbbad45eadc1c5f7d
      size: 3294
    - path: ./models/model.joblib
      hash: md5
      md5: 7d7ab37e2787fae8497123f4c9619e2f
      size: 308361
    - path: ./src/models/evaluate.py
      hash: md5
      md5: ddcb33b1685afd6a14f5298aa4842bcf
      size: 4351
    outs:
    - path: ./run_information.json
      hash: md5
      md5: f1b2a5748daee94aee09eefc2e122a17
      size: 246
  register_model:
    cmd: python ./src/models/register_model.py
    deps:
    - path: ./run_information.json
      hash: md5
      md5: 5244a85d8d4fdc71fe8e76c7e50aa916
      size: 246
    - path: ./src/models/register_model.py
      hash: md5
      md5: 3ac218a8f245e92767ba1a936ecc3ecb
      size: 2415
  split_data:
    cmd: python ./src/data/split_data.py
    deps:
    - path: ./data/interim/df_without_outliers.csv
      hash: md5
      md5: dfd723e2f538f5475039d72d42c235d2
      size: 1924079864
    - path: ./src/data/split_data.py
      hash: md5
      md5: 5f09017a77f8869916db248f5f1abbcb
      size: 2468
    outs:
    - path: ./data/interim/test_raw.csv
      hash: md5
      md5: 1d116fb6a85378d0a513cb50c35254e4
      size: 680816528
    - path: ./data/interim/train_raw.csv
      hash: md5
      md5: 6d6a7693dd51dd4fe9d88a050ba2f080
      size: 1242224382
  model_training:
    cmd: python ./src/models/model_training.py
    deps:
    - path: ./data/processed/train.csv
      hash: md5
      md5: 73197e084c32060fee05904300352077
      size: 10817816
    - path: ./src/models/model_training.py
      hash: md5
      md5: f78d29bde7db77c44a48fd7568848b6f
      size: 2703
    outs:
    - path: ./models/encoder.joblib
      hash: md5
      md5: 1287995bc5fb934b17193238ace29e1a
      size: 3294
    - path: ./models/model.joblib
      hash: md5
      md5: 0726bae48ce76a938f606a4af14a5b69
      size: 308852
  model_evaluation:
    cmd: python ./src/models/model_evaluation.py
    deps:
    - path: ./data/processed/test.csv
      hash: md5
      md5: cd1a3eee4a867780ee7db5abf9ca1af4
      size: 5617276
    - path: ./data/processed/train.csv
      hash: md5
      md5: 73197e084c32060fee05904300352077
      size: 10817816
    - path: ./models/encoder.joblib
      hash: md5
      md5: 1287995bc5fb934b17193238ace29e1a
      size: 3294
    - path: ./models/model.joblib
      hash: md5
      md5: 0726bae48ce76a938f606a4af14a5b69
      size: 308852
    - path: ./src/models/model_evaluation.py
      hash: md5
      md5: bc9119dbe3c42003aeb4509d1d74b635
      size: 4323
    outs:
    - path: ./run_information.json
      hash: md5
      md5: 5244a85d8d4fdc71fe8e76c7e50aa916
      size: 246
